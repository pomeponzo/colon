<!DOCTYPE html>
<html lang="fr">
<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
   <title>Quel est votre profil digestif ? - Quiz personnalisé</title>
   <style>
       * {
           margin: 0;
           padding: 0;
           box-sizing: border-box;
           -webkit-tap-highlight-color: transparent;
       }

        html, body {
            height: 100vh;
            height: 100dvh;
            width: 100%;
            overflow: hidden;
        }

       body {
           font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Inter', Roboto, 'Helvetica Neue', Arial, sans-serif;
           background: #f8f9fa;
           margin: 0;
           padding: 0;
       }

       .app-container {
           background: #f8f9fa;
           width: 100%;
           height: 100vh;
           height: 100dvh;
           display: flex;
           flex-direction: column;
           overflow: hidden;
       }

       @media (min-width: 600px) {
           .app-container {
               max-width: 500px;
               margin: 0 auto;
           }
       }

       .app-header {
           display: flex;
           align-items: center;
           justify-content: space-between;
           padding: 12px 16px;
           background: white;
           border-bottom: 1px solid rgba(0, 0, 0, 0.05);
           flex-shrink: 0;
           z-index: 10;
           height: 48px;
           position: relative;
       }

       .back-button {
           background: none;
           border: none;
           color: #64748b;
           cursor: pointer;
           padding: 6px;
           border-radius: 8px;
           transition: all 0.2s ease;
           display: flex;
           align-items: center;
           justify-content: center;
           width: 32px;
           height: 32px;
       }

       .back-button:hover {
           background: rgba(139, 92, 246, 0.1);
           color: #7c3aed;
       }

       .back-button svg {
           width: 18px;
           height: 18px;
       }

       .app-logo {
           font-size: 1rem;
           font-weight: 600;
           background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%);
           -webkit-background-clip: text;
           -webkit-text-fill-color: transparent;
           background-clip: text;
           position: absolute;
           left: 50%;
           transform: translateX(-50%);
       }

       .header-right {
           display: flex;
           align-items: center;
           gap: 10px;
       }

       .step-counter {
           font-size: 0.8rem;
           color: #64748b;
           font-weight: 500;
           min-width: 44px;
           text-align: right;
       }

       .legal-links {
           display: flex;
           align-items: center;
           justify-content: center;
           gap: 8px;
           flex-wrap: wrap;
           font-size: 0.8rem;
           color: #64748b;
           text-align: center;
       }

       .legal-links a {
           color: inherit;
           text-decoration: none;
           font-weight: 500;
       }

       .legal-links a:hover {
           color: #7c3aed;
           text-decoration: underline;
       }

       .legal-separator {
           color: rgba(100, 116, 139, 0.6);
       }

       .legal-footer {
           padding: 12px 16px;
           background: white;
           border-top: 1px solid rgba(0, 0, 0, 0.05);
           flex-shrink: 0;
       }

       @media (max-width: 599px) {
           .legal-links {
               justify-content: center;
           }
       }

       .progress-bar {
           height: 2px;
           background: rgba(0, 0, 0, 0.05);
           position: relative;
           overflow: hidden;
           flex-shrink: 0;
       }

       .progress-fill {
           height: 100%;
           background: linear-gradient(90deg, #8b5cf6 0%, #7c3aed 100%);
           transition: width 0.5s cubic-bezier(0.4, 0.0, 0.2, 1);
       }

       .app-content {
           flex: 1;
           display: flex;
           flex-direction: column;
           overflow: hidden;
           padding: 20px 16px 16px 16px;
           min-height: 0;
       }

       .question-section {
           display: none;
           flex: 1;
           flex-direction: column;
           animation: slideIn 0.3s ease;
           overflow: hidden;
       }

       .question-section.active {
           display: flex;
       }

       @keyframes slideIn {
           from {
               opacity: 0;
               transform: translateY(10px);
           }
           to {
               opacity: 1;
               transform: translateY(0);
           }
       }

       .question-content {
           flex: 1;
           display: flex;
           flex-direction: column;
           overflow-y: auto;
           overflow-x: hidden;
           -webkit-overflow-scrolling: touch;
           padding: 4px;
           margin: -4px;
       }

       .question-header {
           margin-bottom: 24px;
           flex-shrink: 0;
       }

       .question-title {
           font-size: 1.75rem;
           font-weight: 700;
           color: #1e293b;
           margin-bottom: 10px;
           line-height: 1.2;
       }

       .question-subtitle {
           font-size: 1rem;
           color: #64748b;
           line-height: 1.5;
       }

       .options-container {
           display: flex;
           flex-direction: column;
           gap: 10px;
           flex: 1;
           min-height: 0;
       }

       /* CRITICAL: Grid pour la question d'âge avec images */
       .options-grid-age {
           display: grid;
           grid-template-columns: repeat(2, 1fr);
           gap: 12px;
           width: 100%;
       }

       /* CRITICAL: Style spécifique pour les cartes d'âge avec images */
       .option-card-age {
           background: white;
           border: 2px solid transparent;
           border-radius: 16px;
           cursor: pointer;
           transition: all 0.2s ease;
           position: relative;
           overflow: hidden;
           aspect-ratio: 3/4;
           display: flex;
           flex-direction: column;
           padding: 0;
       }

       .option-card-age:hover {
           border-color: #8b5cf6;
           transform: translateY(-2px);
           box-shadow: 0 4px 12px rgba(139, 92, 246, 0.15);
       }

       .option-card-age.selected {
           border-color: #7c3aed;
           background: rgba(139, 92, 246, 0.05);
       }

       /* CRITICAL: Container pour l'image qui dépasse */
       .age-image-container {
           width: 100%;
           height: 75%;
           overflow: hidden;
           position: relative;
           flex-shrink: 0;
           background: #f8f9fa;
       }

       .age-image {
           width: 100%;
           height: 110%;
           object-fit: cover;
           object-position: center top;
           display: block;
       }

       /* CRITICAL: Zone du texte de l'âge */
       .age-label-container {
           flex: 1;
           display: flex;
           align-items: center;
           justify-content: space-between;
           padding: 16px 20px;
           background: white;
       }

       .age-label {
           font-size: 1.5rem;
           font-weight: 700;
           color: #1e293b;
       }

       .age-arrow {
           width: 20px;
           height: 20px;
           color: #64748b;
       }

       .options-grid {
           display: grid;
           grid-template-columns: repeat(2, minmax(0, 1fr));
           gap: 14px;
       }

       .options-grid-mobile-2 {
           display: grid;
           grid-template-columns: repeat(2, minmax(0, 1fr));
           gap: 12px;
       }

       .option-card {
           background: white;
           border: 2px solid #e2e8f0;
           border-radius: 12px;
           padding: 18px 16px;
           cursor: pointer;
           transition: all 0.2s ease;
           display: flex;
           flex-direction: column;
           gap: 8px;
           min-height: 80px;
       }

       .option-card:hover {
           border-color: #8b5cf6;
           transform: translateY(-2px);
           box-shadow: 0 4px 12px rgba(139, 92, 246, 0.15);
       }

       .option-card.selected {
           border-color: #7c3aed;
           background: rgba(139, 92, 246, 0.05);
       }

       .option-icon {
           font-size: 1.8rem;
           line-height: 1;
       }

       .option-text {
           font-size: 0.95rem;
           color: #1e293b;
           font-weight: 500;
           line-height: 1.3;
       }

       .option-checkbox {
           display: flex;
           align-items: flex-start;
           gap: 12px;
       }

       .option-checkbox input[type="checkbox"] {
           width: 20px;
           height: 20px;
           margin-top: 2px;
           flex-shrink: 0;
           cursor: pointer;
           accent-color: #7c3aed;
       }

       .continue-button {
           width: 100%;
           padding: 16px;
           background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%);
           color: white;
           border: none;
           border-radius: 12px;
           font-size: 1rem;
           font-weight: 600;
           cursor: pointer;
           transition: all 0.3s ease;
           margin-top: 16px;
           flex-shrink: 0;
       }

       .continue-button:disabled {
           background: #cbd5e1;
           cursor: not-allowed;
           opacity: 0.6;
       }

       .continue-button:not(:disabled):hover {
           transform: translateY(-2px);
           box-shadow: 0 8px 16px rgba(139, 92, 246, 0.3);
       }

       /* Email section */
       .email-section {
           display: flex;
           flex-direction: column;
           gap: 16px;
           flex: 1;
           justify-content: center;
       }

       .email-step {
           display: flex;
           flex-direction: column;
           gap: 8px;
       }

       .input-field {
           width: 100%;
           padding: 16px;
           border: 2px solid #e2e8f0;
           border-radius: 12px;
           font-size: 1rem;
           font-family: inherit;
           transition: all 0.2s ease;
       }

       .input-field:focus {
           outline: none;
           border-color: #8b5cf6;
           box-shadow: 0 0 0 3px rgba(139, 92, 246, 0.1);
       }

       /* Loader */
       .loader {
           display: none;
           flex-direction: column;
           align-items: center;
           justify-content: center;
           gap: 20px;
           padding: 40px 20px;
       }

       .loader.active {
           display: flex;
       }

       .spinner {
           width: 50px;
           height: 50px;
           border: 4px solid rgba(139, 92, 246, 0.2);
           border-top-color: #8b5cf6;
           border-radius: 50%;
           animation: spin 1s linear infinite;
       }

       @keyframes spin {
           to { transform: rotate(360deg); }
       }

       .loader-text {
           color: #64748b;
           font-size: 1rem;
           text-align: center;
       }

       /* Results */
       .result-section {
           display: none;
           flex-direction: column;
           gap: 20px;
           padding-bottom: 20px;
       }

       .result-section.active {
           display: flex;
       }

       .result-card {
           background: white;
           border-radius: 16px;
           padding: 24px;
           box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
       }

       .result-title {
           font-size: 1.3rem;
           font-weight: 700;
           color: #1e293b;
           margin-bottom: 12px;
       }

       .result-text {
           font-size: 1rem;
           color: #475569;
           line-height: 1.6;
           margin-bottom: 12px;
       }

       .result-text:last-child {
           margin-bottom: 0;
       }

       .result-highlight {
           background: rgba(139, 92, 246, 0.05);
           border-left: 4px solid #8b5cf6;
           padding: 16px;
           border-radius: 8px;
           margin-top: 12px;
       }

       .result-highlight-title {
           font-weight: 700;
           color: #7c3aed;
           margin-bottom: 8px;
       }

       .cta-button {
           width: 100%;
           padding: 18px;
           background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%);
           color: white;
           border: none;
           border-radius: 12px;
           font-size: 1.1rem;
           font-weight: 600;
           cursor: pointer;
           transition: all 0.3s ease;
       }

       .cta-button:hover {
           transform: translateY(-2px);
           box-shadow: 0 8px 16px rgba(139, 92, 246, 0.3);
       }
   </style>
</head>
<body>
   <div class="app-container">
       <header class="app-header">
           <button class="back-button" id="backButton">
               <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                   <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
               </svg>
           </button>
           <div class="app-logo">DigestZen</div>
           <div class="header-right">
               <span class="step-counter" id="stepCounter">1/9</span>
           </div>
       </header>

       <div class="progress-bar">
           <div class="progress-fill" id="progressFill" style="width: 11.11%"></div>
       </div>

       <main class="app-content">
           <!-- Question 1: Âge avec images -->
           <section class="question-section active" id="q1">
               <div class="question-content">
                   <div class="question-header">
                       <h2 class="question-title">What is your age range?</h2>
                       <p class="question-subtitle">We only use your age to personalize your results.</p>
                   </div>
                   <div class="options-container">
                       <div class="options-grid-age">
                           <div class="option-card-age" data-value="18-29">
                               <div class="age-image-container">
                                   <img src="https://images.unsplash.com/photo-1494790108377-be9c29b29330?w=400&h=600&fit=crop&crop=faces" 
                                        alt="18-29" 
                                        class="age-image">
                               </div>
                               <div class="age-label-container">
                                   <span class="age-label">18-29</span>
                                   <svg class="age-arrow" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                       <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
                                   </svg>
                               </div>
                           </div>

                           <div class="option-card-age" data-value="30-39">
                               <div class="age-image-container">
                                   <img src="https://images.unsplash.com/photo-1438761681033-6461ffad8d80?w=400&h=600&fit=crop&crop=faces" 
                                        alt="30-39" 
                                        class="age-image">
                               </div>
                               <div class="age-label-container">
                                   <span class="age-label">30-39</span>
                                   <svg class="age-arrow" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                       <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
                                   </svg>
                               </div>
                           </div>

                           <div class="option-card-age" data-value="40-49">
                               <div class="age-image-container">
                                   <img src="https://images.unsplash.com/photo-1544005313-94ddf0286df2?w=400&h=600&fit=crop&crop=faces" 
                                        alt="40-49" 
                                        class="age-image">
                               </div>
                               <div class="age-label-container">
                                   <span class="age-label">40-49</span>
                                   <svg class="age-arrow" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                       <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
                                   </svg>
                               </div>
                           </div>

                           <div class="option-card-age" data-value="50+">
                               <div class="age-image-container">
                                   <img src="https://images.unsplash.com/photo-1573496359142-b8d87734a5a2?w=400&h=600&fit=crop&crop=faces" 
                                        alt="50+" 
                                        class="age-image">
                               </div>
                               <div class="age-label-container">
                                   <span class="age-label">50+</span>
                                   <svg class="age-arrow" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                       <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
                                   </svg>
                               </div>
                           </div>
                       </div>
                   </div>
               </div>
           </section>

           <!-- Question 2 -->
           <section class="question-section" id="q2">
               <div class="question-content">
                   <div class="question-header">
                       <h2 class="question-title">Quel est votre symptôme principal ?</h2>
                       <p class="question-subtitle">Celui qui vous gêne le plus au quotidien</p>
                   </div>
                   <div class="options-container">
                       <div class="options-grid-mobile-2">
                           <div class="option-card" data-value="ballonnements">
                               <span class="option-icon">🎈</span>
                               <span class="option-text">Ballonnements</span>
                           </div>
                           <div class="option-card" data-value="douleurs">
                               <span class="option-icon">⚡</span>
                               <span class="option-text">Douleurs abdominales</span>
                           </div>
                           <div class="option-card" data-value="transit">
                               <span class="option-icon">🔄</span>
                               <span class="option-text">Transit irrégulier</span>
                           </div>
                           <div class="option-card" data-value="peur">
                               <span class="option-icon">😰</span>
                               <span class="option-text">Peur de manger</span>
                           </div>
                       </div>
                   </div>
               </div>
           </section>

           <!-- Question Email -->
           <section class="question-section" id="emailQuestion">
               <div class="question-content">
                   <div class="question-header">
                       <h2 class="question-title">Dernière étape !</h2>
                       <p class="question-subtitle">Recevez votre profil digestif personnalisé</p>
                   </div>
                   <div class="email-section">
                       <div class="email-step">
                           <input type="email" class="input-field" id="emailInput" placeholder="votre.email@exemple.com" required>
                       </div>
                   </div>
                   <button class="continue-button">Découvrir mon profil</button>
               </div>
           </section>

           <!-- Loader -->
           <div class="loader" id="loader">
               <div class="spinner"></div>
               <p class="loader-text">Analyse de votre profil digestif en cours...</p>
           </div>

           <!-- Résultats -->
           <section class="result-section" id="results">
               <div class="result-card">
                   <h2 class="result-title">🎯 Votre Profil : <span id="profileType">Intestin Hypersensible</span></h2>
                   <p class="result-text" id="resultMirror">
                       D'après vos réponses, vous souffrez probablement de troubles digestifs depuis plusieurs années. 
                       Vous avez déjà essayé différentes solutions sans succès durable. Vous n'êtes pas seule : 
                       <strong>plus de 5 millions de Françaises vivent la même chose</strong>.
                   </p>
               </div>

               <div class="result-card">
                   <h3 class="result-title">❌ Pourquoi ça n'a pas marché jusqu'ici</h3>
                   <p class="result-text">
                       Le problème : les solutions classiques (médicaments, régimes FODMAP, probiotiques) 
                       <strong>ne s'attaquent pas à la vraie cause</strong>…
                   </p>
                   <p class="result-text">
                       ⚠️ Elles traitent les symptômes, pas l'origine du déséquilibre.
                   </p>
               </div>

               <button class="cta-button" onclick="alert('Redirection vers VSL')">
                   Voir la vidéo maintenant →
               </button>
           </section>
       </main>

       <footer class="legal-footer">
           <div class="legal-links">
               <a href="#" target="_blank">CGV</a>
               <span class="legal-separator">•</span>
               <a href="#" target="_blank">Mentions légales</a>
               <span class="legal-separator">•</span>
               <a href="#" target="_blank">Politique de confidentialité</a>
           </div>
       </footer>
   </div>

   <script>
       // État de l'application
       let currentStep = 1;
       const totalSteps = 9;
       const answers = {};

       // Éléments DOM
       const backButton = document.getElementById('backButton');
       const stepCounter = document.getElementById('stepCounter');
       const progressFill = document.getElementById('progressFill');

       // Gestion du bouton retour
       backButton.addEventListener('click', () => {
           if (currentStep > 1) {
               goToStep(currentStep - 1);
           }
       });

       // Mise à jour de l'interface
       function updateUI() {
           stepCounter.textContent = `${currentStep}/${totalSteps}`;
           const progress = (currentStep / totalSteps) * 100;
           progressFill.style.width = `${progress}%`;
           backButton.style.visibility = currentStep > 1 ? 'visible' : 'hidden';
       }

       // Navigation entre les questions
       function goToStep(step) {
           document.querySelectorAll('.question-section').forEach(section => {
               section.classList.remove('active');
           });
           
           const targetSection = document.getElementById(`q${step}`) || document.getElementById('emailQuestion');
           if (targetSection) {
               targetSection.classList.add('active');
               currentStep = step;
               updateUI();
           }
       }

       // Gestion des cartes d'âge
       const ageCards = document.querySelectorAll('#q1 .option-card-age');
       ageCards.forEach(card => {
           card.addEventListener('click', () => {
               ageCards.forEach(c => c.classList.remove('selected'));
               card.classList.add('selected');
               answers.age = card.dataset.value;
               
               // Passer à la question suivante après sélection
               setTimeout(() => {
                   goToStep(2);
               }, 300);
           });
       });

       // Gestion des autres options
       document.querySelectorAll('#q2 .option-card').forEach(option => {
           option.addEventListener('click', () => {
               document.querySelectorAll('#q2 .option-card').forEach(opt => opt.classList.remove('selected'));
               option.classList.add('selected');
               answers.q2 = option.dataset.value;
               
               setTimeout(() => {
                   showEmailQuestion();
               }, 300);
           });
       });

       // Afficher la question email
       function showEmailQuestion() {
           document.querySelectorAll('.question-section').forEach(section => {
               section.classList.remove('active');
           });
           document.getElementById('emailQuestion').classList.add('active');
       }

       // Gestion de l'email
       const emailInput = document.getElementById('emailInput');
       const emailSection = document.getElementById('emailQuestion');
       const emailContinueBtn = emailSection.querySelector('.continue-button');

       emailContinueBtn.addEventListener('click', () => {
           const email = emailInput.value.trim();
           if (!email || !email.includes('@')) {
               alert('Merci de renseigner une adresse email valide.');
               return;
           }
           
           answers.email = email;
           showResults();
       });

       // Afficher les résultats
       function showResults() {
           const loader = document.getElementById('loader');
           const results = document.getElementById('results');
           
           emailSection.classList.remove('active');
           loader.classList.add('active');
           
           setTimeout(() => {
               loader.classList.remove('active');
               results.classList.add('active');
               
               // Scroll en haut
               document.querySelector('.app-content').scrollTop = 0;
           }, 2000);
       }

       // Initialisation
       updateUI();
       backButton.style.visibility = 'hidden';
   </script>
</body>
</html>
